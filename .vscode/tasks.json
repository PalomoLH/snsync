{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "SN: Open Record in Browser üåé",
            "type": "shell",
            "command": "node",
            "args": [
                "${workspaceFolder}/snsync",
                "--open",
                "${file}",
                "--project",
                "${fileDirname}" 
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "presentation": {
                "reveal": "silent",
                "panel": "shared"
            },
            "problemMatcher": [],
            "group": "build"
        },
        {
            "label": "SN: Push Current File ‚¨ÜÔ∏è",
            "type": "shell",
            "command": "node",
            "args": [
                "${workspaceFolder}/snsync",
                "--push",
                "${file}",
                "--project",
                "${fileDirname}"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "presentation": {
                "reveal": "always",
                "panel": "shared"
            },
            "problemMatcher": [],
            "group": "build"
        },
        {
            "label": "SN: Pull (Download) Project ‚¨áÔ∏è",
            "type": "shell",
            "command": "node",
            "args": [
                "${workspaceFolder}/snsync",
                "--pull",
                "--project",
                "${input:pickProject}",
                "--context-action",
                "${input:contextMode}"
            ],
            "problemMatcher": [],
            "group": "build"
        },
        {
            "label": "SN: Pull Current Record Only ‚¨áÔ∏è",
            "type": "shell",
            "command": "node",
            "args": [
                "${workspaceFolder}/snsync",
                "--pull",
                "--target",
                "${file}",
                "--project",
                "${fileDirname}",
                "--context-action",
                "${input:contextMode}"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "presentation": {
                "reveal": "always",
                "panel": "shared"
            },
            "problemMatcher": [],
            "group": "build"
        },
        {
            "label": "SN: Pull Custom (Query) üîç",
            "type": "shell",
            "command": "node",
            "args": [
                "${workspaceFolder}/snsync",
                "--pull",
                "--project",
                "${input:pickProject}",
                "--context-action",
                "${input:contextMode}",
                "--table",
                "${input:enterTable}",
                "--query",
                {
                    "value": "${input:enterQuery}",
                    "quoting": "strong"
                }
            ],
            "problemMatcher": [],
            "group": "build"
        },
        {
            "label": "SN: Push Custom (Folder) üì¶",
            "type": "shell",
            "command": "node",
            "args": [
                "${workspaceFolder}/snsync",
                "--push",
                "--project",
                "${input:pickProject}",
                "--table",
                "${input:enterTable}",
                "--name",
                "${input:enterFolderName}"
            ],
            "problemMatcher": [],
            "group": "build"
        },
        {
            "label": "SN: Push All New Records (All Tables) üÜïüì¶",
            "type": "shell",
            "command": "node",
            "args": [
                "${workspaceFolder}/snsync",
                "--push",
                "--all",
                "--project",
                "${input:pickProject}"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "presentation": {
                "reveal": "always",
                "panel": "shared"
            },
            "problemMatcher": [],
            "group": "build"
        },
        {
            "label": "SN: Push All New Records (Table) üÜïüì¶",
            "type": "shell",
            "command": "node",
            "args": [
                "${workspaceFolder}/snsync",
                "--push",
                "--project",
                "${input:pickProject}",
                "--table",
                "${input:enterTable}"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "presentation": {
                "reveal": "always",
                "panel": "shared"
            },
            "problemMatcher": [],
            "group": "build"
        },
        {
            "label": "SN: Watch (Monitor) Project üëÄ",
            "type": "shell",
            "command": "node",
            "args": [
                "${workspaceFolder}/snsync",
                "--watch",
                "--project",
                "${input:pickProject}"
            ],
            "isBackground": true,
            "problemMatcher": [],
            "group": "build"
        },
        {
            "label": "SN: Create New Project üÜï",
            "type": "shell",
            "command": "node",
            "args": [
                "${workspaceFolder}/_tool/create-project.js",
                "--name", "${input:newProjectName}",
                "--instance", "${input:newInstanceUrl}",
                "--clientId", "${input:newClientId}",
                "--clientSecret", "${input:newClientSecret}",
                "--user", "${input:newUser}",
                "--password", "${input:newPassword}"
            ],
            "problemMatcher": [],
            "presentation": {
                "reveal": "always",
                "panel": "shared"
            },
            "group": "build"
        }
    ],
    "inputs": [
        {
            "id": "pickProject",
            "type": "promptString",
            "description": "Relative project folder (e.g., projects/my-project):",
            "default": "projects/<project-folder>"
        },
        {
            "id": "contextMode",
            "type": "pickString",
            "description": "Missing reference context handling mode:",
            "options": [
                "prompt",
                "auto",
                "skip"
            ],
            "default": "prompt"
        },
        {
            "id": "enterTable",
            "type": "promptString",
            "description": "Table Name (e.g., sp_widget, sys_script_include):"
        },
        {
            "id": "enterQuery",
            "type": "promptString",
            "description": "Encoded Query (e.g., nameSTARTSWITHMyWidget):",
            "default": ""
        },
        {
            "id": "enterFolderName",
            "type": "promptString",
            "description": "Record Folder Name (e.g., My_Cool_Widget):"
        },
        {
            "id": "newProjectName",
            "type": "promptString",
            "description": "Project Name (folder):"
        },
        {
            "id": "newInstanceUrl",
            "type": "promptString",
            "description": "ServiceNow Instance URL:"
        },
        {
            "id": "newClientId",
            "type": "promptString",
            "description": "Client ID (For Browser Auth):",
            "default": ""
        },
        {
            "id": "newClientSecret",
            "type": "promptString",
            "description": "Client Secret (For Browser Auth):",
            "default": ""
        },
        {
            "id": "newUser",
            "type": "promptString",
            "description": "User (Optional/Basic Auth):",
            "default": ""
        },
        {
            "id": "newPassword",
            "type": "promptString",
            "description": "Password (Optional/Basic Auth):",
            "default": ""
        }
    ]
}
