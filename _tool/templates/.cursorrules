# ServiceNow Project Instructions for AI Assistant

## Project Context
This repository is a local representation of a ServiceNow instance, synchronized using a custom **Node.js Bridge (sn-sync.js)**.
- **Architecture:** Files are organized by Table and Record Name: `src/<Table>/<RecordName>/<Field>.ext`.
- **Sync Mechanism:** Saving a file (Ctrl+S) automatically uploads the code to the ServiceNow instance via the Table API.
- **Context:** 
  - Each record folder contains a hidden `.sys_id` file that links it to the server.
  - Table schema and available fields are documented in `src/<Table>/.ai_context/_schema.<Table>.json`. READ THIS JSON to understand available fields.

## Critical Workflow Rules
1.  **Sys_ID Handling:**
    - Do not invent or hallucinate `sys_id` values.
    - Treat `sys_id` as read-only metadata handled by the platform.
    - If a folder lacks a `.sys_id` file, it is considered a **New Record**.

2.  **Creating New Records:**
    - You CAN create new records directly in VS Code.
    - **Step 1:** Create a folder inside the correct table folder (e.g., `sys_properties/MyNewProp`).
    - **Step 2:** Create the necessary files (e.g., `value.txt`, `_properties.json` with `{"name": "...", "type": "string"}`).
    - **Step 3:** The user will run the Push command on that folder to create it on ServiceNow.

3.  **Global Scope Nuances:**
    - Since we are in the **Global** scope, avoid adding `x_` or `u_` prefixes to function names or classes unless explicitly requested.
    - Assume access to global system APIs (`gs.`, `g_form`, `GlideRecord`, `GlideSystem`) without strict scoping restrictions.

## ðŸ§  AI Context & Search
To find relevant files, DO NOT rely only on filenames.
1.  **Search for Context Tags:**
    - Use `grep` or search for `**Context: <Tag>**` (e.g., `Context: Hackathon`).
    - These tags are located in `_ai_context.md` files within record folders.
2.  **Analyze Metadata:**
    - Check `_record.json` or `_properties.json` for field values, types, and descriptions.
    - This allows you to understand the configuration without needing to guess from the code solely.

## Coding Standards (ServiceNow Best Practices)
- **Database Operations:**
    - Always prefer `GlideAggregate` over `GlideRecord` for counting records.
    - Always use `setLimit()` when querying for a check or single record update.
    - **Never** use `gr.update()` inside a loop without batching or reconsidering the logic.
- **Script Includes:**
    - Structure new Script Includes as strictly defined Classes (Prototype pattern).
    - Ensure functions are documented with `@param` and `@return` for IntelliSense.
- **Logging:**
    - Use `gs.info()`, `gs.warn()`, or `gs.error()` instead of `gs.log()`.
    - Prefix logs with the feature name for easier filtering (e.g., `[ClientA]: Log message`).
